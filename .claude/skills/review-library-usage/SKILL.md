---
description: コードの実装が完了したと判断したらユーザーに報告する前に行うセルフレビュー
user-invocable: true
---

# 実装完了セルフレビュー

実装が完了したと判断した時点で、ユーザーへ報告する前に以下の観点でセルフチェックを行う。

## レビュー観点

### 1. パッケージAPIの活用

既存のパッケージが提供する機能を活用できているか確認する。

**チェック項目**:
- 実装したコードと同等の機能がパッケージに既に存在しないか
- 類似の処理が他の場所でパッケージAPIを使って実装されていないか
- 手動で計算・変換している箇所がユーティリティ関数で置換できないか

### 2. 実装の一貫性

同じ目的のコードが、場所によって異なる方法で実装されていないか確認する。

**チェック項目**:
- 同様の処理を行う既存コードと実装パターンが統一されているか
- 新規コードが既存の設計方針・コーディング規約に沿っているか
- importしているモジュールが他の類似ファイルと揃っているか

### 3. ドキュメントとの整合性（双方向）

パッケージのドキュメントと実装が双方向で一致しているか確認する。

**チェック項目**:
- 使用しているAPIの使い方がドキュメントの例と一致しているか
- 非推奨や内部APIを直接使用していないか
- ドキュメントに記載のある便利な機能を見落としていないか
- 変更したソースファイルの関数シグネチャ（引数名・型・デフォルト値）が対応するドキュメントと一致しているか
- 新たに追加・エクスポートした関数や型がドキュメント（README.mdの一覧テーブル、詳細APIドキュメント）に記載されているか
- 型定義の `readonly` 修飾子がドキュメントにも反映されているか

## 参照すべきドキュメント

### 必須参照

- `packages/engine/docs/README.md` - 描画・レイヤーパッケージの概要とAPI一覧
- `packages/input/docs/README.md` - 入力・座標変換パッケージの概要とAPI一覧
- `packages/stroke/docs/README.md` - ストロークセッション・履歴管理パッケージの概要とAPI一覧

### 詳細確認時

- `packages/engine/docs/` - 各API詳細
- `packages/input/docs/` - 各API詳細
- `packages/stroke/docs/` - 各API詳細
- `docs/` - プロジェクト全体のアーキテクチャ

## レビュー手順

1. **実装箇所の特定**: 今回変更・追加したファイルをリストアップ
2. **類似コードの検索**: 同様の処理を行う既存コードを探す
3. **パッケージAPI確認**: 関連パッケージのドキュメントを確認
4. **差分の検証**: 実装方法に差異がある場合、その理由が妥当か判断
5. **統一または報告**: 不整合があれば修正、または理由をユーザーに報告

## レポート形式

問題を発見した場合:

```markdown
## セルフレビュー結果

### 発見した課題

- **箇所**: （ファイル名と概要）
- **内容**: （何が問題か）
- **推奨対応**: （どう修正すべきか）

### 確認したドキュメント

- （参照したドキュメント一覧）
```

問題がない場合は、確認した旨を簡潔に報告する。
