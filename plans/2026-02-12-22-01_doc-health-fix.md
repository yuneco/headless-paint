# ドキュメント健全性修正

ドキュメントと実装の乖離を検出し、ドキュメント側を修正する。コード側が正。

## 対象（優先度 Medium 以上）

### 1. ルート README.md の全面更新 [高]

**乖離**: `@headless-paint/react` パッケージが完全に未記載。2種類のユーザーへの誘導もない。

**修正内容**:
- パッケージ構成図・一覧表・依存関係図に `react` パッケージを追加
- apps/web の説明に `@headless-paint/react` の利用を反映
- **2種類のユーザー向けの誘導セクション**を追加:
  - コアパッケージ直接利用 → 各 `packages/*/docs/` へ
  - React で簡易組み込み → `packages/react/docs/` へ

### 2. stroke/session-api.md — endStrokeSession 修正 [高]

**乖離**: `endStrokeSession` に `layerId: string` が第2引数として追加済みだがドキュメント未反映。使用例も古い。

**修正内容**:
- 関数シグネチャに `layerId` パラメータを追加
- 使用例（onPointerUp 等）を修正

### 3. engine/README.md — addLayer 修正 [中]

**乖離**: `addLayer` に `insertIndex?: number` パラメータ追加がドキュメント未反映。

**修正内容**:
- 関数テーブルのシグネチャを `addLayer(layers, width, height, meta?, insertIndex?)` に更新

### 4. engine/types.md — Layer.id 追加 [中]

**乖離**: `Layer` インターフェースに `readonly id: string` フィールドが存在するがドキュメントに未記載。

**修正内容**:
- Layer 型定義に `readonly id: string` を追加

### 5. stroke/history-api.md — 新規関数・deprecated 記載 [中]

**乖離**: 複数の export 済み関数が未記載。deprecated 注記もない。

**修正内容**:
- `rebuildLayerFromHistory` の詳細説明を追加
- `replayCommands` の説明を追加
- `createCheckpoint` / `restoreFromCheckpoint` の説明を追加
- `rebuildLayerState` に deprecated 注記を追加（`rebuildLayerFromHistory` を推奨）

### 6. react/README.md — 説明の補完 [中]

**乖離**: 実装の詳細が説明不足な箇所が複数ある。

**修正内容**:
- `renderVersion` が `layerRenderVersion + session.renderVersion` の加算合成であることを明記
- `useExpand(layerWidth, layerHeight)` のパラメータ用途（デフォルト展開設定の中心座標計算）を追記
- `useTouchGesture` が `onStrokeStart` を常に `pendingOnly=true` で呼ぶことを追記
- `onWheel` のパラメータ型が標準 DOM `WheelEvent`（React.WheelEvent ではない）であることを明示

## 対象外（優先度 Low — 今回スキップ）

- input/types.md の `CompiledFilterPipeline.plugins` / `FilterPipelineState` フィールドの公開方針 → 設計判断として現状維持
